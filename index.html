<!DOCTYPE html>
<html>
    <head>
        <title>Stroop Control</title>
		<script src="jspsych-6.1.0/jspsych.js"></script>
		<script src="jspsych-6.1.0/plugins/jspsych-image-audio-response.js"></script>
		<script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
		<link rel="stylesheet" href="jspsych-6.1.0/css/jspsych.css"></link>
		<style>
			img { width: 300px; }
		</style>
    </head>
    <body></body>
	<script>
		
		var num_blocks = 2;

		var timeline = []; // initialise timeline
		
		var participant_test = {
			type: 'image-audio-response',
			stimulus: 'stimuli/pink-pink.png',
			prompt: "<p>You need to allow microphone access in your browser.<br>Now you can test it out.<br> Speak, playback, and rerecord as you like.<br>In the experiment itself, you will not be able to playback, or rerecord.</p>",
			allow_playback: true,
			buffer_length: 6000,
			wait_for_mic_approval: true,
		}
		//timeline.push(participant_test);

		var stroop_task = {
			timeline: [
				{
					type: 'html-keyboard-response',
					stimulus: '<div style="font-size:60px;">+</div>',
					choices: jsPsych.NO_KEYS,
					trial_duration: 300
				},
				{
					type: 'image-audio-response',
					stimulus: jsPsych.timelineVariable('stim_path'),
					allow_playback: false,
					buffer_length: 2000,
					wait_for_mic_approval: false,
					data: jsPsych.timelineVariable('add_data')
				}
			],
			timeline_variables: [
				{stim_path: 'stimuli/pink-pink.png', add_data: {stimulus: 'pink-pink'}},
				{stim_path: 'stimuli/pink-pink.png', add_data: {stimulus: 'pink-pink'}},
				{stim_path: 'stimuli/pink-pink.png', add_data: {stimulus: 'pink-pink'}},
				{stim_path: 'stimuli/pink-blue.png', add_data: {stimulus: 'pink-blue'}},
				{stim_path: 'stimuli/pink-gold.png', add_data: {stimulus: 'pink-gold'}},
				{stim_path: 'stimuli/blue-blue.png', add_data: {stimulus: 'blue-blue'}},
				{stim_path: 'stimuli/blue-blue.png', add_data: {stimulus: 'blue-blue'}},
				{stim_path: 'stimuli/blue-blue.png', add_data: {stimulus: 'blue-blue'}},
				{stim_path: 'stimuli/blue-pink.png', add_data: {stimulus: 'blue-pink'}},
				{stim_path: 'stimuli/blue-gold.png', add_data: {stimulus: 'blue-gold'}},
				{stim_path: 'stimuli/gold-gold.png', add_data: {stimulus: 'gold-gold'}},
				{stim_path: 'stimuli/gold-gold.png', add_data: {stimulus: 'gold-gold'}},
				{stim_path: 'stimuli/gold-gold.png', add_data: {stimulus: 'gold-gold'}},
				{stim_path: 'stimuli/gold-pink.png', add_data: {stimulus: 'gold-pink'}},
				{stim_path: 'stimuli/gold-blue.png', add_data: {stimulus: 'gold-blue'}},
			],
			randomize_order: true,
			repetitions: num_blocks
		}
		timeline.push(stroop_task);

		jsPsych.init({
			timeline: timeline,
			on_finish: function(){
				jsPsych.data.displayData();
			}
		});

	</script>
</html>
